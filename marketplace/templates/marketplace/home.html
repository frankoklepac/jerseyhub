{% extends 'base.html' %}

{% block title %}Marketplace{% endblock %}

{% block content %}
    <div class="marketplace-header">
        <h1>Marketplace</h1>
        <div>
            {% if user.is_authenticated %}
                <a href="{% url 'user_posts' owner_id=request.user.id %}" class="btn btn-my-posts">My Posts</a>
                <a href="{% url 'create_post' %}" class="btn btn-success">+ Create Post</a>
            {% else %}
                <a href="{% url 'login' %}?next={{ request.path }}" class="btn">Login to Post</a>
            {% endif %}
        </div>
    </div>

    <div class="product-grid">
        {% for post in posts %}
        <div class="product-card">
            {% if post.image %}
                <img src="{{ post.image.url }}" alt="{{ post.title }}">
            {% else %}
                <div class="no-image-placeholder">No Image</div>
            {% endif %}
            
            <h3>{{ post.title }}</h3>
            <p class="price">${{ post.price }}</p>
            <p class="post-author">By: {{ post.owner.username }}</p>
            
            <div class="actions">
                <a href="{% url 'post_detail' post_id=post.id %}" class="btn btn-view-details">View Details</a>
            </div>
        </div>
        {% empty %}
        <p>No jerseys available in the marketplace.</p>
        {% endfor %}
    </div>
{% endblock %}